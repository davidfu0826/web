<div class="col-md-12 <%= flash_class('notice') %> copy-status" style="display: none;">
</div>
<br />
<table class="table table-hover table-condensed">
  <thead>
    <tr>
      <th><%= t('.file_name') %></th>
      <th><%= t('.type') %></th>
      <th><%= t('.copy') %></th>
      <th><%= t('.delete') %></th>
    </tr>
  </thead>
  <tbody>
    <% @uploads.each do |upload| %>
      <tr>
        <% link = (upload.image.present?) ? edit_image_path(upload.image) : upload_url(upload) %>
        <td><%= link_to upload.file_name, link %></td>
        <td><%= upload.file_type %></td>
        <td>
          <% link = (upload.image.present?) ? image_url(upload.image) : upload_url(upload) %>
          <%= link_to fa_icon('link', text: t('.copy_to_clipboard')), '#copy', class: 'copy-link', data: { 'clipboard-text': link } %>
        </td>
        <td>
          <%= link_to fa_icon('trash-o', text: t(:destroy)), upload, method: :delete, data: { confirm: t(:confirm_delete) } %>
        </td>
      </tr>
    <% end %>
    </tr>
  </tbody>
</table>

<script>
  var client = new ZeroClipboard($(".copy-link"));
  client.on('aftercopy', function(event) {
    $('.copy-status').html("Kopierade: \n" + event.data["text/plain"]);
    $('.copy-status').show();
  });

  $(".copy-link").click( function() {
    return false;
  });
</script>

<%= paginate @uploads %>
